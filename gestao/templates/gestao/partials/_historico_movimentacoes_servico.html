{% load humanize %}
<ul class="timeline">
    {% for mov in movimentacoes %}
    <li class="timeline-item">
        <div class="timeline-marker {% if mov.status == 'CONCLUIDA' %} bg-success {% else %} bg-primary {% endif %}">
            <i class="bi {% if mov.status == 'CONCLUIDA' %}bi-check2-circle{% else %}bi-list-task{% endif %}"></i>
        </div>
        <div class="timeline-content">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h6 class="mb-0">{{ mov.titulo }}</h6>
                    <small class="text-muted">Em {{ mov.data_atividade|date:"d/m/Y" }} por {{ mov.responsavel.get_full_name|default:mov.responsavel.username }}</small>
                </div>
                <span class="badge rounded-pill {% if mov.status == 'CONCLUIDA' %}bg-success-subtle text-success-emphasis{% else %}bg-primary-subtle text-primary-emphasis{% endif %}">{{ mov.get_status_display }}</span>
            </div>
            {% if mov.detalhes %}<p class="mb-0 mt-2 small text-muted">{{ mov.detalhes|linebreaksbr }}</p>{% endif %}
        </div>
    </li>
    {% empty %}
    <li class="timeline-item">
        <div class="timeline-marker bg-secondary"><i class="bi bi-info-lg"></i></div>
        <div class="timeline-content"><p class="mb-0 text-muted">Nenhum andamento registrado para este servi√ßo.</p></div>
    </li>
    {% endfor %}
</ul>